


<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

    <head>
        <title>CORS | Fine Uploader Documentation</title>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="icon" href="/favicon.ico">
        

        
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet">
        
        
        <link href='https://fonts.googleapis.com/css?family=Maven+Pro:700,400' rel='stylesheet' type='text/css'>
        
        
        <link rel="stylesheet" href="/branch/master/_static/css/main.css" />
        <link rel="stylesheet" href="/branch/master/_static/css/pygments.css" />
        

        
        
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
        

        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


        <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">

            <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse" aria-label="mobile navigation menu">
                <span class="hide">mobile navigation menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li><a class="brand" href="http://fineuploader.com/"><img style="margin-top: -10px; height: 20px" src="https://fineuploader.com/img/FineUploader_logo.png" alt="Fine Uploader logo"></a></li>
                    <li><a href="/branch/master">Docs</a></li>
                    <li><a href="https://blog.fineuploader.com/">Blog</a></li>

                    <li class="dropdown">
                        <button id="features-menu-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Features <b class="caret"></b></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="features-menu-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/async-tasks-and-promises.html">Async Tasks & Promises</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/azure.html">Azure Blob Storage Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/cancellable-uploads.html">Cancelling</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/chunking.html">Chunking</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/concurrent-chunking.html">Concurrent Chunking</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/CORS.html">CORS</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/delete.html">Delete</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/drag-and-drop.html">Drag and Drop</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/handling-errors.html">Error Handling</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/modules.html">ES6 & CommonJS Support</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/filename-edit.html">Filename Editing</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/forms.html">Form Support</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/session.html">Initial File Lists</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/extra-buttons.html">Multiple Upload Buttons</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/no-server-uploads.html">No-Server Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/paste-to-upload.html">Paste</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/pause.html">Pause In-Progress Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/progress-bars.html">Progress Bars</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/thumbnails.html">Previews & Thumbnails</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/request-parameters.html">Request Parameters</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/resume.html">Resuming</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/retry.html">Retrying</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/s3.html">S3 Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/statistics-and-status-updates.html">Stats & Status</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/styling.html">Styling</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/upload-files.html">Uploading</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/scaling.html">Upload Scaled Images</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/upload-from-mobile-camera.html">Upload via Mobile Camera</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/validation.html">Validation</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <button id="api-menu-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">API <b class="caret"></b></button>
                        <ul class="dropdown-menu api" role="menu" aria-labelledby="api-menu-trigger">
                                <li><b>Options</b></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options.html">Core</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options-ui.html">UI</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options-s3.html">S3</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options-azure.html">Azure</a></li>
                                <li class="divider"></li>
                                <li><b>Methods</b></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/methods.html">Core & UI</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/methods-s3.html">S3</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/methods-azure.html">Azure</a></li>
                                <li class="divider"></li>
                                <li><b>Events</b></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/events.html">Core & UI</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/events-s3.html">S3</a></li>
                                <li class="divider"></li>
                                <li role="presentation"><a role="menuitem" style="margin-left: -20px;" href="/branch/master/api/qq.html">Utilities</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <button id="servers-dropdown-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Servers <b class="caret"></b></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="servers-dropdown-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master/endpoint_handlers/traditional.html">Traditional</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/endpoint_handlers/amazon-s3.html">Amazon S3</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/endpoint_handlers/azure.html">Azure Blob Storage</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <button id="support-dropdown-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Support <b class="caret"></b></button>
                        <ul class="dropdown-menu support" role="menu" aria-labelledby="support-dropdown-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master/browser-support.html">Browsers</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/faq.html">FAQ</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/handling-errors.html">Handling Errors</a></li>
                        </ul>
                    </li>

                    
                        
                    
                    
                    <li class="dropdown">
                        <button id="version-dropdown-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Version <b class="caret"></b></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="version-dropdown-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master">Current: 5.14.1</a></li>
                            
                                <li role="presentation"><a role="menuitem" href="/branch/master">Stable</a></li>
                            
                                <li role="presentation"><a role="menuitem" href="/branch/develop">In Progress</a></li>
                            
                            <li role="presentation">
                                <form class="tag-chooser">
                                    <input class="tag-input" name="tag" placeholder="5.4.0">
                                    <button class="btn btn-info">Go</button>
                                </form>
                            </li>
                        </ul>
                    </li>
                </ul>

                <form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-right">
                    <input type="hidden" name="sites" value="docs.fineuploader.com/branch/master"/>
                    <!-- Header -->
                    <input type="hidden" name="kj" value="#0088CC"/>
                    <!-- Background -->
                    <input type="hidden" name="k7" value="#FFFFFF"/>
                    <!-- Text -->
                    <input type="hidden" name="k8" value="#444444"/>
                    <!-- Links -->
                    <input type="hidden" name="k9" value="#0088CC"/>
                    <!-- Visited Links -->
                    <input type="hidden" name="kaa" value="#0088CC"/>
                    <!-- URLS -->
                    <input type="hidden" name="kx" value="#F87436"/>
                    <!-- Font -->
                    <input type="hidden" name="kt" value="h"/>
                    <input type="text" name="q" maxlength="255" placeholder="Search&hellip;" class="span2" title="search documentation" style="margin-top: 4px;"/>
                    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden; width: 0;" />
                </form>
            </div>
        </div>
    </div>
</div>




        
        <div class="container-fluid">
            <div class='row-fluid'>
            

                <div class="span2 sidebar">
                

<div class="sidebar">
    
    <div class="accordion-group">
        <div class="accordion-heading">
            <a href="../api/options.html"><b>Options</b></a>
        </div>
        <div class="accordion-body">
            <div class="accordon-inner">
                <ul class="nav nav-list">
        
            
                <li><a href="../api/options.html#cors">cors</a></li>
            
        
                </ul>
            </div>
        </div>
    </div>
    

    

    

</div>



                </div>

                <div class="span9 content">
                    <span class="pull-right version-number"><p>5.14.1</p></span>

                

                
<h1 class="page-header" id="cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)</h1>
<p><a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&amp;redirectslug=HTTP_access_control">CORS</a>
or Cross-origin resource sharing allows client-side JavaScript to make AJAX requests to another domain.</p>
<p>Fine Uploader has support for uploading and sending requests via CORS, but there are a few
caveats depending on which browser is being used.</p>
<h2 id="support-exceptions">Support exceptions</h2>
<ul>
<li>In IE8 and IE9, the response from the request iframe is passed to the uploader window via window.postMessage.</li>
<li>Delete file CORS requests in IE9 and earlier are not supported. This is due to the fact that DELETE requests must be preflighted.
IE9 and earlier require <code>XDomainRequest</code> to be used when sending CORS requests, and <code>XDomainRequest</code> does not support preflighting.
The delete files feature will be automatically disabled in IE9 and earlier if Fine Uploader CORS support is enabled.</li>
</ul>
<h2 id="enabling-cors-support">Enabling CORS support</h2>
<p>If you set the <code>core.expected</code> property to <code>true</code>, it is assumed that all requests will be cross-domain requests.
If you set this value to <code>true</code> and do not respond using the cross-domain response convention outlined in the next section for non-XHR requests,
even if the request is NOT cross-domain, it will be considered a failure.</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">uploader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qq</span><span class="p">.</span><span class="nx">FineUploader</span><span class="p">({</span>
    <span class="nx">element</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;myUploader&#39;</span><span class="p">),</span>
    <span class="nx">request</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">endpoint</span><span class="o">:</span> <span class="s1">&#39;server/upload&#39;</span>
    <span class="p">}</span>
    <span class="nx">cors</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">//all requests are expected to be cross-domain requests</span>
        <span class="nx">expected</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

        <span class="c1">//if you want cookies to be sent along with the request</span>
        <span class="nx">sendCredentials</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


<h2 id="handling-xhr-cors-requests-server-side">Handling XHR CORS requests server-side</h2>
<p>You will know if an incoming upload request was sent via <code>XMLHttpRequest</code> if the request has an <code>X-Requested-With</code> header
with a value of “XMLHttpRequest”. If CORS support is enabled in Fine Uploader, you must properly handle the associated
requests and format your responses accordingly. Note that, since non-standards headers are sent with all Fine Uploader requests,
ALL XHR requests are preflighted. This applies to both delete file requests (which are all XHR requests) and upload requests
on browsers that support the File API. This means that you will need to handle an OPTIONS request as well. Your responses
must include the appropriate Access-Control headers. If you set the <code>cors.sendCredentials</code> property to <code>true</code>, you should be aware
that your responses must NOT include wildcard <code>Access-Control-Allow-Origin</code> headers, and you must also include the
<code>Access-Control-Allow-Credentials</code> header. The actual response text for CORS XHR requests will not differ at all from
response text for non-CORS requests.</p>
<h2 id="handling-iframe-cors-upload-requests-server-side">Handling iframe CORS upload requests server-side</h2>
<p>An incoming upload request has been sent sent by Fine Uploader via a form submission inside of a hidden iframe if the request does not have an
<code>X-Requested-With</code> header, or if the <code>X-Requested-With</code> header has a value other than “XMLHttpRequest”. Handling cross-domain
iframe/form-submit-initiated uploads (in browsers that do not support the File API) is a bit tricky for Fine Uploader.
Your response for iframe based request (such as required when using IE8 or IE9), will look very similar to your normal response,
except it must have a <code>Content-Type</code> header value of “text/html”, and your response must import a helper javascript file
via a <code>&lt;script&gt;</code> tag immediately preceding your valid JSON response. For example:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;{\&quot;success\&quot;: true, \&quot;uuid\&quot;: \&quot;9da17ad5-ad6a-40cd-81b5-226e837db45b\&quot;}&lt;script src=\&quot;http://&lt;YOUR_SERVER_DOMAIN&gt;/iframe.xss.response-&lt;VERSION&gt;.js/&quot;</span><span class="err">&gt;&lt;/script&gt;&quot;</span>
</pre></div>


<p>All cross-domain iframe-initiated responses must end with the script tag above, and the valid JSON portion <em>must</em> include
the UUID of the associated file. Note that you must host the iframe.xss.response.js file on an accessible server and
reference it in the <code>&lt;script&gt;</code> tag accordingly. When the contents of your response is returned to the iframe tracked by
Fine Uploader, the associated javascript file imported by the script tag above will be executed, and will pass the JSON
portion of your response to the uploader via <code>window.postMessage</code>.</p>


                
                </div>

            
            </div>
            <footer>
    <p>Fine Uploader - &copy; 2013-present, <a href="http://www.widen.com/">Widen Enterprises, Inc.</a>.</p>
</footer>

        </div> <!-- /container -->
        

        
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        
        
            <!--
            <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
            -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        

        
            
            
            <script>
                
                var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
                (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
                    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
                    s.parentNode.insertBefore(g,s)}(document,'script'));
                
            </script>
            

            
            <script type="text/javascript">
                var clicky_site_ids = clicky_site_ids || [];
                clicky_site_ids.push(100643192);
                (function() {
                    var s = document.createElement('script');
                    s.type = 'text/javascript';
                    s.async = true;
                    s.src = '//static.getclicky.com/js';
                    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
                })();
            </script>
            <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100643192ns.gif" /></p></noscript>
            
        

        <script src="/branch/master/_static/js/main.js"></script>
        <script src="/branch/master/_static/js/navbar.js"></script>

        
        
        


    </body>
</html>