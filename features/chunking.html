


<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

    <head>
        <title>Chunking | Fine Uploader Documentation</title>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="icon" href="/favicon.ico">
        

        
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet">
        
        
        <link href='https://fonts.googleapis.com/css?family=Maven+Pro:700,400' rel='stylesheet' type='text/css'>
        
        
        <link rel="stylesheet" href="/branch/master/_static/css/main.css" />
        <link rel="stylesheet" href="/branch/master/_static/css/pygments.css" />
        

        
        
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
        

        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


        <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">

            <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse" aria-label="mobile navigation menu">
                <span class="hide">mobile navigation menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li><a class="brand" href="http://fineuploader.com/"><img style="margin-top: -10px; height: 20px" src="https://fineuploader.com/img/FineUploader_logo.png" alt="Fine Uploader logo"></a></li>
                    <li><a href="/branch/master">Docs</a></li>
                    <li><a href="https://blog.fineuploader.com/">Blog</a></li>

                    <li class="dropdown">
                        <button id="features-menu-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Features <b class="caret"></b></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="features-menu-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/async-tasks-and-promises.html">Async Tasks & Promises</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/azure.html">Azure Blob Storage Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/cancellable-uploads.html">Cancelling</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/chunking.html">Chunking</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/concurrent-chunking.html">Concurrent Chunking</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/CORS.html">CORS</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/delete.html">Delete</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/drag-and-drop.html">Drag and Drop</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/handling-errors.html">Error Handling</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/modules.html">ES6 & CommonJS Support</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/filename-edit.html">Filename Editing</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/forms.html">Form Support</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/session.html">Initial File Lists</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/extra-buttons.html">Multiple Upload Buttons</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/no-server-uploads.html">No-Server Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/paste-to-upload.html">Paste</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/pause.html">Pause In-Progress Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/progress-bars.html">Progress Bars</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/thumbnails.html">Previews & Thumbnails</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/request-parameters.html">Request Parameters</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/resume.html">Resuming</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/retry.html">Retrying</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/s3.html">S3 Uploads</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/statistics-and-status-updates.html">Stats & Status</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/styling.html">Styling</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/upload-files.html">Uploading</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/scaling.html">Upload Scaled Images</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/upload-from-mobile-camera.html">Upload via Mobile Camera</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/validation.html">Validation</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <button id="api-menu-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">API <b class="caret"></b></button>
                        <ul class="dropdown-menu api" role="menu" aria-labelledby="api-menu-trigger">
                                <li><b>Options</b></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options.html">Core</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options-ui.html">UI</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options-s3.html">S3</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/options-azure.html">Azure</a></li>
                                <li class="divider"></li>
                                <li><b>Methods</b></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/methods.html">Core & UI</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/methods-s3.html">S3</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/methods-azure.html">Azure</a></li>
                                <li class="divider"></li>
                                <li><b>Events</b></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/events.html">Core & UI</a></li>
                                <li role="presentation"><a role="menuitem" href="/branch/master/api/events-s3.html">S3</a></li>
                                <li class="divider"></li>
                                <li role="presentation"><a role="menuitem" style="margin-left: -20px;" href="/branch/master/api/qq.html">Utilities</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <button id="servers-dropdown-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Servers <b class="caret"></b></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="servers-dropdown-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master/endpoint_handlers/traditional.html">Traditional</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/endpoint_handlers/amazon-s3.html">Amazon S3</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/endpoint_handlers/azure.html">Azure Blob Storage</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <button id="support-dropdown-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Support <b class="caret"></b></button>
                        <ul class="dropdown-menu support" role="menu" aria-labelledby="support-dropdown-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master/browser-support.html">Browsers</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/faq.html">FAQ</a></li>
                            <li role="presentation"><a role="menuitem" href="/branch/master/features/handling-errors.html">Handling Errors</a></li>
                        </ul>
                    </li>

                    
                        
                    
                    
                    <li class="dropdown">
                        <button id="version-dropdown-trigger" class="dropdown-toggle btn btn-link" data-toggle="dropdown">Version <b class="caret"></b></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="version-dropdown-trigger">
                            <li role="presentation"><a role="menuitem" href="/branch/master">Current: 5.15.7</a></li>
                            
                                <li role="presentation"><a role="menuitem" href="/branch/master">Stable</a></li>
                            
                                <li role="presentation"><a role="menuitem" href="/branch/develop">In Progress</a></li>
                            
                            <li role="presentation">
                                <form class="tag-chooser">
                                    <input class="tag-input" name="tag" placeholder="5.4.0">
                                    <button class="btn btn-info">Go</button>
                                </form>
                            </li>
                        </ul>
                    </li>
                </ul>

                <form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-right">
                    <input type="hidden" name="sites" value="docs.fineuploader.com/branch/master"/>
                    <!-- Header -->
                    <input type="hidden" name="kj" value="#0088CC"/>
                    <!-- Background -->
                    <input type="hidden" name="k7" value="#FFFFFF"/>
                    <!-- Text -->
                    <input type="hidden" name="k8" value="#444444"/>
                    <!-- Links -->
                    <input type="hidden" name="k9" value="#0088CC"/>
                    <!-- Visited Links -->
                    <input type="hidden" name="kaa" value="#0088CC"/>
                    <!-- URLS -->
                    <input type="hidden" name="kx" value="#F87436"/>
                    <!-- Font -->
                    <input type="hidden" name="kt" value="h"/>
                    <input type="text" name="q" maxlength="255" placeholder="Search&hellip;" class="span2" title="search documentation" style="margin-top: 4px;"/>
                    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden; width: 0;" />
                </form>
            </div>
        </div>
    </div>
</div>




        
        <div class="container-fluid">
            <div class='row-fluid'>
            

                <div class="span2 sidebar">
                

<div class="sidebar">
    
    <div class="accordion-group">
        <div class="accordion-heading">
            <a href="../api/options.html"><b>Options</b></a>
        </div>
        <div class="accordion-body">
            <div class="accordon-inner">
                <ul class="nav nav-list">
        
            
                <li><a href="../api/options.html#chunking">chunking</a></li>
            
        
                </ul>
            </div>
        </div>
    </div>
    

    

    
    <div class="accordion-group">
        <div class="accordion-heading">
            <a href="../api/events.html"><b>Events</b></a>
        </div>
        <div class="accordion-body">
            <div class="accordon-inner">
                <ul class="nav nav-list">
        
            
                <li><a href="../api/events.html#uploadChunk">uploadChunk</a></li>
            
        
            
                <li><a href="../api/events.html#uploadChunkSuccess">uploadChunkSuccess</a></li>
            
        
                </ul>
            </div>
        </div>
    </div>
    

</div>



                </div>

                <div class="span9 content">
                    <span class="pull-right version-number"><p>5.15.7</p></span>

                

                
<p>[postmaxsize[: http://php.net/manual/en/ini.core.php#ini.post-max-size</p>
<h1 class="page-header" id="chunking-partitioning">Chunking &amp; Partitioning</h1>
<div class="alert alert-block alert-default">

<h4 class="alert-heading">Note:</h4>

<p><a href="concurrent-chunking.html">Concurrent chunking</a> is also supported!</p>

</div>

<p>With the advent of the File API, modern browsers now are capable of dividing
files into "chunks". This feature is a crucial
component to the <a href="resume.html">resume</a> feature, and makes the <a href="retry.html">retry</a> feature
more useful.  File chunking also provides a workaround for request size limits
put in place by browsers (e.g., Firefox and Chrome limit upload request
sizes to about 4GB) and servers (e.g. [PHP's <code>post_max_size</code>][postmaxsize]).</p>
<div class="alert alert-block alert-default">

<h4 class="alert-heading">Amazon S3 Specific Note:</h4>

<p>The default chunk size for Fine Uploader S3 is 5 MiB. If your file is smaller than that size,
the upload will be <em>not</em> be chunked.</p>

</div>

<p>Chunking is made possible by the File API, and is supported in Chrome, Firefox,
Safari (iOS 6+ and OS X), Internet Explorer 10+, Opera 15+, and Microsoft Edge 13.10586+. Chunking is disabled in
Android's stock browser due to a bug in the browser's ability to upload Blobs.</p>
<p>Each chunk is sent as a separate request, and each chunked request
should be acknowledged just as you would for a non-chunked request.
The response to each chunked upload request is checked to determine success. If the
server responds with a failure response, the uploader will attempt to retry,
sending the file starting with the last failed chunk (if the <code>autoRetry</code> option
is enabled).</p>
<p>The details of chunking are largely invisible to your servers when using Fine Uploader S3 or Fine Uploader Azure. However
if sending files to an endpoint you control, there are some details you must be aware of.</p>
<h2 id="traditional-endpointsservers-not-s3-or-azure">Traditional endpoints/servers (not S3 or Azure)</h2>
<p>The parameters on a chunked request will contain <em>at least</em> the following information. Consider a sample file
with named "NSA_PRISM.ppt" with a total file size of about 15 MB and a configured chunk size of 2 MB for the following example:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;qquuid&quot;</span><span class="p">:</span> <span class="s2">&quot;380d6893-b98b-4189-9938-93d265dfab5d&quot;</span><span class="p">,</span>
    <span class="nt">&quot;qqpartindex&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;qqpartbyteoffset&quot;</span><span class="p">:</span> <span class="mi">2000000</span><span class="p">,</span>
    <span class="nt">&quot;qqtotalfilesize&quot;</span><span class="p">:</span> <span class="mi">15092995</span><span class="p">,</span>
    <span class="nt">&quot;qqtotalparts&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="nt">&quot;qqfilename&quot;</span><span class="p">:</span> <span class="s2">&quot;NSA_PRISM.ppt&quot;</span><span class="p">,</span>
    <span class="nt">&quot;qqchunksize&quot;</span><span class="p">:</span> <span class="mi">2000000</span>
<span class="p">}</span>
</pre></div>


<div class="alert alert-block alert-info">

<h4 class="alert-heading">Note:</h4>

<p><code>qqpartindex</code> is 0-indexed!</p>

</div>

<p>The <code>qqfilename</code> parameter is only sent along with chunked requests that are
multipart encoded. This is because multipart encoded uploads report the filename
in the Content-Disposition header as "blob" or the empty string when a <code>Blob</code>
is included in the request. When a file is chunked, it is split up into <code>Blob</code> pieces.
So, to determine the original filename when dealing with a multipart encoded request, you must read the <code>qqfilename</code> property.</p>
<p>Since each chunk comes in as a separate request, the server should save the chunk
to a temporary location. The filename should be saved using the <code>qquuid</code> parameter
to guarantee there are no collisions with other chunks. After all chunks have
been received for a file (i.e., <code>qqpartindex == qqtotalparts - 1</code>) then you should
combine all the chunks (in order) to recreate the original file.</p>
<p>Fine Uploader will also keep an eye out for a <code>reset</code> JSON property in the
server's response. When this property is present Fine Uploader will
fail the upload and then restart the upload with the first chunk again on the
next attempt (assuming auto or manual retry has been enabled).</p>
<h3 id="post-when-all-chunks-have-successfully-uploaded_1">POST when all chunks have successfully uploaded</h3>
<p>You may specify a <code>chunking.success.endpoint</code> if you'd like your server to be called when all chunks
have been successfully uploaded.  Note that this only applies to traditional endpoint.  See the section on
the <a href="concurrent-chunking.html#server-side-implications">chunking success call</a> for more details.</p>


                
                </div>

            
            </div>
            
        </div> <!-- /container -->
        

        
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        
        
            <!--
            <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
            -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        

        
            
            
            <script>
                
                var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
                (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
                    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
                    s.parentNode.insertBefore(g,s)}(document,'script'));
                
            </script>
            

            
            <script type="text/javascript">
                var clicky_site_ids = clicky_site_ids || [];
                clicky_site_ids.push(100643192);
                (function() {
                    var s = document.createElement('script');
                    s.type = 'text/javascript';
                    s.async = true;
                    s.src = '//static.getclicky.com/js';
                    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
                })();
            </script>
            <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100643192ns.gif" /></p></noscript>
            
        

        <script src="/branch/master/_static/js/main.js"></script>
        <script src="/branch/master/_static/js/navbar.js"></script>

        
        
        


    </body>
</html>