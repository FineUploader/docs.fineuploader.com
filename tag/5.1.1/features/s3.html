


<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

    <head>
        <title>Uploading Directly to Amazon S3 | Fine Uploader Documentation</title>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="icon" href="/favicon.ico">
        

        
        <!--
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet">
        
        
        <link href='http://fonts.googleapis.com/css?family=Maven+Pro:700,400' rel='stylesheet' type='text/css'>
        
        
        <link rel="stylesheet" href="/tag/5.1.1/_static/css/main.css" />
        <link rel="stylesheet" href="/tag/5.1.1/_static/css/pygments.css" />
        

        

        
        <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
        

        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


        <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li><a class="brand" href="http://fineuploader.com/"><img style="margin-top: -10px; height: 20px" src="http://fineuploader.com/img/FineUploader_logo.png"></img></a></li>
                    <li><a href="/tag/5.1.1">Docs</li></a>
                    <li><a href="http://blog.fineuploader.com/">Blog</li></a>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/tag/5.1.1/features/async-tasks-and-promises.html">Async Tasks & Promises</a></li>
                            <li><a href="/tag/5.1.1/features/azure.html">Azure Blob Storage Uploads</a></li>
                            <li><a href="/tag/5.1.1/features/cancellable-uploads.html">Cancelling</a></li>
                            <li><a href="/tag/5.1.1/features/chunking.html">Chunking</a></li>
                            <li><a href="/tag/5.1.1/features/concurrent-chunking.html">Concurrent Chunking</a></li>
                            <li><a href="/tag/5.1.1/features/CORS.html">CORS</a></li>
                            <li><a href="/tag/5.1.1/features/delete.html">Delete</a></li>
                            <li><a href="/tag/5.1.1/features/drag-and-drop.html">Drag and Drop</a></li>
                            <li><a href="/tag/5.1.1/features/handling-errors.html">Error Handling</a></li>
                            <li><a href="/tag/5.1.1/features/filename-edit.html">Filename Editing</a></li>
                            <li><a href="/tag/5.1.1/features/forms.html">Form Support</a></li>
                            <li><a href="/tag/5.1.1/features/session.html">Initial File Lists</a></li>
                            <li><a href="/tag/5.1.1/features/extra-buttons.html">Multiple Upload Buttons</a></li>
                            <li><a href="/tag/5.1.1/features/no-server-uploads.html">No-Server Uploads</a></li>
                            <li><a href="/tag/5.1.1/features/paste-to-upload.html">Paste</a></li>
                            <li><a href="/tag/5.1.1/features/pause.html">Pause In-Progress Uploads</a></li>
                            <li><a href="/tag/5.1.1/features/progress-bars.html">Progress Bars</a></li>
                            <li><a href="/tag/5.1.1/features/thumbnails.html">Previews & Thumbnails</a></li>
                            <li><a href="/tag/5.1.1/features/request-parameters.html">Request</a></li>
                            <li><a href="/tag/5.1.1/features/resume.html">Resuming</a></li>
                            <li><a href="/tag/5.1.1/features/retry.html">Retrying</a></li>
                            <li><a href="/tag/5.1.1/features/s3.html">S3 Uploads</a></li>
                            <li><a href="/tag/5.1.1/features/statistics-and-status-updates.html">Stats & Status</a></li>
                            <li><a href="/tag/5.1.1/features/styling.html">Styling</a></li>
                            <li><a href="/tag/5.1.1/features/upload-files.html">Uploading</a></li>
                            <li><a href="/tag/5.1.1/features/scaling.html">Upload Scaled Images</a></li>
                            <li><a href="/tag/5.1.1/features/upload-from-mobile-camera.html">Upload via Mobile Camera</a></li>
                            <li><a href="/tag/5.1.1/features/validation.html">Validation</a></li>
                        </ul>
                    </li>


                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu api">
                                <li><b>Options</b></li>
                                <li><a href="/tag/5.1.1/api/options.html">Core</a></li>
                                <li><a href="/tag/5.1.1/api/options-ui.html">UI</a></li>
                                <li><a href="/tag/5.1.1/api/options-s3.html">S3</a></li>
                                <li><a href="/tag/5.1.1/api/options-azure.html">Azure</a></li>
                                <li class="divider"></li>
                                <li><b>Methods</b></li>
                                <li><a href="/tag/5.1.1/api/methods.html">Core & UI</a></li>
                                <li><a href="/tag/5.1.1/api/methods-s3.html">S3</a></li>
                                <li><a href="/tag/5.1.1/api/methods-azure.html">Azure</a></li>
                                <li class="divider"></li>
                                <li><b>Events</b></li>
                                <li><a href="/tag/5.1.1/api/events.html">Core & UI</a></li>
                                <li><a href="/tag/5.1.1/api/events-s3.html">S3</a></li>
                                <li class="divider"></li>
                                <li><a style="margin-left: -20px;"href="/tag/5.1.1/api/qq.html">Utilities</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Servers <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <ul><a href="/tag/5.1.1/endpoint_handlers/traditional.html">Traditional</a></ul>
                            <ul><a href="/tag/5.1.1/endpoint_handlers/amazon-s3.html">Amazon S3</a></ul>
                            <ul><a href="/tag/5.1.1/endpoint_handlers/azure.html">Azure Blob Storage</a></ul>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                        <ul class="dropdown-menu support">
                            <li><a href="/tag/5.1.1/browser-support.html">Browser Support</a></li>
                            <li><a href="http://stackoverflow.com/questions/tagged/fine-uploader">Community Support</a></li>
                            <li><a href="/tag/5.1.1/faq.html">FAQ</a></li>
                            <li><a href="/tag/5.1.1/features/handling-errors.html">Handling Errors</a></li>
                            <li><a href="https://github.com/Widen/fine-uploader/issues">Issue/Feature Tracker</a></li>
                            <li><a href="http://fineuploader.com/purchase">Purchase Support</a></li>
                        </ul>
                    </li>

                    
                        
                    
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Version <b class="caret"></b>
                        <ul class="dropdown-menu">
                            <li class><a href="/tag/5.1.1">Current: 5.1.1</a></li>
                            
                                <li><a href="/branch/master">Stable</a></li>
                            
                                <li><a href="/branch/develop">In Progress</a></li>
                            
                        </ul>
                    </li>
                </ul>

                <form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-right">
                    <input type="hidden" name="sites" value="docs.fineuploader.com/tag/5.1.1"/>
                    <!-- Header -->
                    <input type="hidden" name="kj" value="#0088CC"/>
                    <!-- Background -->
                    <input type="hidden" name="k7" value="#FFFFFF"/>
                    <!-- Text -->
                    <input type="hidden" name="k8" value="#444444"/>
                    <!-- Links -->
                    <input type="hidden" name="k9" value="#0088CC"/>
                    <!-- Visited Links -->
                    <input type="hidden" name="kaa" value="#0088CC"/>
                    <!-- URLS -->
                    <input type="hidden" name="kx" value="#F87436"/>
                    <!-- Font -->
                    <input type="hidden" name="kt" value="h"/>
                    <input type="text" name="q" maxlength="255" placeholder="Search&hellip;" class="span2" style="margin-top: 4px;"/>
                    <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
                </form>


                    <!--
                    <div class="pull-right">
                        <iframe src="http://duckduckgo.com/search.html?site=docs.fineuploader.com&prefill=Search documentation&focus=yes" style="overflow:hidden;margin:0;padding:0;width:208px;height:10px;" frameborder="0"></iframe>
                    </div>
                    -->
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>




        
        <div class="container-fluid">
            <div class='row-fluid'>
            

                <div class="span2 sidebar">
                

                </div>

                <div class="span9 content">
                    <span class="pull-right" style="opacity: .7; padding: 1px; margin-right: 5px;"><p>5.1.1</p></span>

                

                
<h1 class="page-header" id="uploading-directly-to-amazon-s3">Uploading Directly to Amazon S3</h1>
<h3 id="general-uploads-to-s3">General Uploads to S3</h3>
<p>Please see <a href="http://blog.fineuploader.com/2013/08/16/fine-uploader-s3-upload-directly-to-amazon-s3-from-your-browser/">the blog post on Fine Uploader S3</a>.</p>
<h3 id="uploading-to-s3-through-a-cdn">Uploading to S3 Through a CDN</h3>
<p>Support for uploads to an S3 bucket via a CDN was added in Fine Uploader 5.1.0.  You can upload files to
any S3 bucket through any CDN, provided the CDN forwards all headers and does not append any additional
headers to the request that is sent on to S3.</p>
<p>An example of a CDN that should work fine is <a href="http://www.fastly.com/">fastly</a>.  An example of a CDN that does not appear
to work is, ironically, Amazon CloudFront.  There are a number of issues with CloudFront&#8217;s support of POST
requests to S3.  First, CloudFront appends headers to the request.  To get around this, an Origin Access
Identity must be used, which makes the process quite complicated for integrators.  Second, multipart encoded
POSTs to an S3 bucket appear to fail when the endpoint is a non-default CloudFront behavior.  Third, there
does not appear to be any way to forward all headers to an S3 origin via a CloudFront endpoint.  This is
a problem for uploads using S3&#8217;s REST API, since we must include the ACL, metadata, encryption, redundancy
parameters, and a number of other information via the Initiate Multipart Upload POST request.  We have notified
Amazon of these issues, but they have been unwilling to address or acknowledge them.  For continuing updates
on support to CloudFront, please see <a href="https://github.com/FineUploader/fine-uploader/issues/1016">issue #1016 in the Fine Uploader GitHub issue tracker</a>.</p>
<h4 id="overview_1">Overview</h4>
<p>When uploading to S3 via a CDN, you must specify the name of the bucket.  This is not required for uploads
directly to S3, since Fine Uploader is able to determine the bucket name by examining the S3 endpoint URL.
This is obviously not the case for a CDN endpoint.  So, in addition to specifying the CDN endpoint via the
<a href="../api/options-s3.html#request.endpoint"><code>request.endpoint</code> option</a>, you must also specify a bucket name via the <a href="../api/options-s3.html#objectProperties.bucket"><code>objectProperties.bucket</code> option</a>.
Please see the documentation for these options for more details.</p>
<h4 id="simplest-setup">Simplest Setup</h4>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">uploader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qq</span><span class="p">.</span><span class="nx">s3</span><span class="p">.</span><span class="nx">FineUploader</span><span class="p">({</span>
    <span class="nx">request</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">endpoint</span><span class="o">:</span> <span class="s1">&#39;{ YOUR_CDN_ENDPOINT_URL }&#39;</span>
        <span class="nx">accessKey</span><span class="o">:</span> <span class="s1">&#39;{ YOUR_ACCESS_KEY }&#39;</span>
    <span class="p">},</span>
    <span class="nx">objectProperties</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">bucket</span><span class="o">:</span> <span class="s1">&#39;{ YOUR_S3_BUCKET_NAME }&#39;</span>
    <span class="p">},</span>
    <span class="nx">signature</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">endpoint</span><span class="o">:</span> <span class="s1">&#39;/s3/signature&#39;</span>
    <span class="p">},</span>
    <span class="nx">uploadSuccess</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">endpoint</span><span class="o">:</span> <span class="s1">&#39;/s3/success&#39;</span>
    <span class="p">},</span>
    <span class="nx">iframeSupport</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">localBlankPagePath</span><span class="o">:</span> <span class="s1">&#39;/success.html&#39;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


                
                </div>

            
            </div>
            <footer>
    <p>Powered by <a href="http://www.widen.com/">Widen Enterprises, Inc.</a>. &copy; 2014</p>
</footer>

        </div> <!-- /container -->
        

        
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        
        
            <!--
            <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
            -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        

        
            
            
            <script>
                
                var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
                (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
                    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
                    s.parentNode.insertBefore(g,s)}(document,'script'));
                
            </script>
            

            
            <script type="text/javascript">
                var clicky_site_ids = clicky_site_ids || [];
                clicky_site_ids.push(100643192);
                (function() {
                    var s = document.createElement('script');
                    s.type = 'text/javascript';
                    s.async = true;
                    s.src = '//static.getclicky.com/js';
                    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
                })();
            </script>
            <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100643192ns.gif" /></p></noscript>
            
        

        <script src="/tag/5.1.1/_static/js/main.js"></script>

        
        
        


    </body>
</html>