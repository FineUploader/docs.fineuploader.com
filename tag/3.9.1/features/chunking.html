


<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

    <head>
        <title>Chunking | Fine Uploader Documentation</title>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="icon" href="/favicon.ico">
        

        
        <!--
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet">
        
        
        <link href='http://fonts.googleapis.com/css?family=Maven+Pro:700,400' rel='stylesheet' type='text/css'>
        
        
        <link rel="stylesheet" href="/tag/3.9.1/_static/css/main.css" />
        <link rel="stylesheet" href="/tag/3.9.1/_static/css/pygments.css" />
        

        

        
        <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
        

        

    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


        <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li><a class="brand" href="http://fineuploader.com/"><img style="margin-top: -10px; height: 20px" src="http://fineuploader.com/img/FineUploader_logo.png"></img></a></li>
                    <li><a href="/tag/3.9.1">Docs</li></a>
                    <li><a href="http://blog.fineuploader.com/">Blog</li></a>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/tag/3.9.1/features/async-tasks-and-promises.html">Async Tasks & Promises</a></li>
                            <li><a href="/tag/3.9.1/features/cancellable-uploads.html">Cancelling</a></li>
                            <li><a href="/tag/3.9.1/features/chunking.html">Chunking</a></li>
                            <li><a href="/tag/3.9.1/features/CORS.html">CORS</a></li>
                            <li><a href="/tag/3.9.1/features/delete.html">Delete</a></li>
                            <li><a href="/tag/3.9.1/features/drag-and-drop.html">Drag and Drop</a></li>
                            <li><a href="/tag/3.9.1/features/handling-errors.html">Error Handling</a></li>
                            <li><a href="/tag/3.9.1/features/filename-edit.html">Filename Editing</a></li>
                            <li><a href="/tag/3.9.1/features/extra-buttons.html">Multiple Upload Buttons</a></li>
                            <li><a href="/tag/3.9.1/features/paste-to-upload.html">Paste</a></li>
                            <li><a href="/tag/3.9.1/features/progress-bars.html">Progress Bars</a></li>
                            <li><a href="/tag/3.9.1/features/request-parameters.html">Request</a></li>
                            <li><a href="/tag/3.9.1/features/resume.html">Resuming</a></li>
                            <li><a href="/tag/3.9.1/features/retry.html">Retrying</a></li>
                            <li><a href="/tag/3.9.1/features/statistics-and-status-updates.html">Stats & Status</a></li>
                            <li><a href="/tag/3.9.1/features/styling.html">Styling</a></li>
                            <li><a href="/tag/3.9.1/features/upload-files.html">Uploading</a></li>
                            <li><a href="/tag/3.9.1/features/upload-from-mobile-camera.html">Upload via Mobile Camera</a></li>
                            <li><a href="/tag/3.9.1/features/validation.html">Validation</a></li>
                        </ul>
                    </li>


                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu api">
                                <li><b>Options</b></li>
                                <li><a href="/tag/3.9.1/api/options.html">Core</a></li>
                                <li><a href="/tag/3.9.1/api/options-ui.html">UI</a></li>
                                <li><a href="/tag/3.9.1/api/options-s3.html">S3</a></li>
                                <li class="divider"></li>
                                <li><b>Methods</b></li>
                                <li><a href="/tag/3.9.1/api/methods.html">Core & UI</a></li>
                                <li><a href="/tag/3.9.1/api/methods-s3.html">S3</a></li>
                                <li class="divider"></li>
                                <li><a style="margin-left: -20px;"href="/tag/3.9.1/api/events.html">Events</a></li>
                                <li><a style="margin-left: -20px;"href="/tag/3.9.1/api/qq.html">Utilities</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Servers <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <ul><a href="/tag/3.9.1/endpoint_handlers/traditional.html">Traditional</a></ul>
                            <ul><a href="/tag/3.9.1/endpoint_handlers/amazon-s3.html">Amazon S3</a></ul>
                        </ul>
                    </li>

                    <li><a href="/tag/3.9.1/support.html">Support</li></a>

                    
                        
                    
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Version <b class="caret"></b>
                        <ul class="dropdown-menu">
                            
                                <ul><a href="/branch/master">Stable</a></ul>
                            
                                <ul><a href="/branch/develop">In Progress</a></ul>
                            
                        </ul>
                    </li>
                    <!--
                    <li class="dropdown pull-right">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Current Tag:  <b class="caret"></b>
                        <ul class="dropdown-menu">
                        
                            <li><a href="/branch">Branch</a></li>
                            
                                <ul><a href="/branch/feature/boilerplate">Feature_boilerplate</a></ul>
                            
                                <ul><a href="/branch/feature/4.0-site-update">Feature_4.0-Site-Update</a></ul>
                            
                                <ul><a href="/branch/feature/thumbnails">Feature_thumbnails</a></ul>
                            
                                <ul><a href="/branch/hotfix/bucket-underscores">Hotfix_bucket-Underscores</a></ul>
                            
                                <ul><a href="/branch/develop">Develop</a></ul>
                            
                                <ul><a href="/branch/gh-pages">Gh-Pages</a></ul>
                            
                                <ul><a href="/branch/master">Master</a></ul>
                            
                                <ul><a href="/branch/feature/templating-redesign">Feature_templating-Redesign</a></ul>
                            
                        
                            <li><a href="/favicon.gif">Favicon.gif</a></li>
                            
                        
                            <li><a href="/favicon.ico">Favicon.ico</a></li>
                            
                        
                            <li><a href="/file">File</a></li>
                            
                                <ul><a href="/file/fine-uploader">Fine-Uploader</a></ul>
                            
                        
                            <li><a href="/hook.php">Hook.php</a></li>
                            
                        
                            <li><a href="/htaccess-Fri Aug 16 08:08:46 PDT 2013">Htaccess-Fri Aug 16 08:08:46 Pdt 2013</a></li>
                            
                        
                            <li><a href="/robots.txt">Robots.txt</a></li>
                            
                        
                            <li><a href="/tag">Tag</a></li>
                            
                                <ul><a href="/tag/3.7.1">3.7.1</a></ul>
                            
                                <ul><a href="/tag/3.8.0">3.8.0</a></ul>
                            
                                <ul><a href="/tag/3.8.1">3.8.1</a></ul>
                            
                                <ul><a href="/tag/3.8.2">3.8.2</a></ul>
                            
                                <ul><a href="/tag/3.9.0">3.9.0</a></ul>
                            
                                <ul><a href="/tag/3.9.0-3">3.9.0-3</a></ul>
                            
                                <ul><a href="/tag/3.9.1">3.9.1</a></ul>
                            
                        
                        </ul>
                    </li>
                </ul>
                -->
            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>



        
        <div class="container-fluid">
            <div class='row-fluid'>
            

                <div class="span2 sidebar">
                
                </div>

                <div class="span10 content">
                

                
<h1 class="page-header" id="chunking-partitioning">Chunking &amp; Partitioning</h1>
<p>With the advent of the File API, modern browsers now are capable of dividing
files into &#8220;chunks&#8221; (also referred to as partitions). This feature is a crucial
component to the <a href="resume.html">resume</a> feature, and makes the <a href="retry.html">retry</a> feature
more useful.  File chunking also provides a workaround for request size limits
put in place by browsers (e.g., Firefox and Chrome limit upload request
sizes to about 4GB).</p>
<p>Chunking is made possible by the File API, and is supported in Chrome, Firefox,
Safari (iOS 6+ and OS X), and Internet Explorer 10. Chunking is disabled in all
Android browsers until its <code>Blob.prototype.slice</code> implementation is fixed.</p>
<p>Each chunk is sent in order and as a separate request, and each chunked request
should be acknowledged much as you would for a non-chunked request because
the response to each chunk-request is checked to determine success. If the
server responds with a failure message, the uploader will attempt to retry
sending the file starting with the last failed chunk if the <code>autoRetry</code> option
is enabled.</p>
<p>The parameters on a chunked request will contain the following information:</p>
<div class="codehilite"><pre><span class="p">{</span>
    <span class="nt">&quot;qquuid&quot;</span><span class="p">:</span> <span class="s2">&quot;380d6893-b98b-4189-9938-93d265dfab5d&quot;</span><span class="p">,</span>
    <span class="nt">&quot;qqpartindex&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;qqpartbyteoffset&quot;</span><span class="p">:</span> <span class="mi">2000000</span><span class="p">,</span>
    <span class="nt">&quot;qqtotalfilesize&quot;</span><span class="p">:</span> <span class="mi">15092995</span><span class="p">,</span>
    <span class="nt">&quot;qqtotalparts&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="nt">&quot;qqfilename&quot;</span><span class="p">:</span> <span class="s2">&quot;NSA_PRISM.ppt&quot;</span><span class="p">,</span>
    <span class="nt">&quot;qqchunksize&quot;</span><span class="p">:</span> <span class="mi">2000000</span>
<span class="p">}</span>
</pre></div>


<div class="alert alert-block alert-info">

<h4 class="alert-heading">Hey!</h4>

<p><code>qqpartindex</code> is 0-indexed!</p>

</div>

<p>The <code>qqfilename</code> parameter is only sent along with chunked requests that are
multipart encoded. This is because multipart encoded uploads report the filename
in the Content-Disposition header as &#8220;blob&#8221; or the empty string when a <code>Blob</code>
is included in the request. So, to determine the original filename when dealing
with a multipart encoded request, you must read the <code>qqfilename</code> property.</p>
<p>Custom parameters can be sent with each chunk. Those parameters can be set and
modified in the <code>chunking.paramNames</code> option documented below.</p>
<p>The most code to handle chunking will take be written on the backend as
integrators need to ensure their server is ready and able to handle
chunked uploads.</p>
<p>Since each chunk comes in as a separate request, the server should save the chunk
to a temporary location. The filename should be saved using the <code>qquuid</code> parameter
to guarantee there are no collisions with other chunks. After all chunks have
been received for a file (i.e., <code>qqpartindex == qqtotalparts</code>) then you should
combine all the chunks (in order) to recreate the original file.</p>
<p>Fine Uploader will also keep an eye out for a <code>reset</code> JSON property in the
server&#8217;s response. When this property is present Fine Uploader will
fail the upload and then restart the upload with the first chunk again on the
next attempt (assuming auto or manual retry has been enabled).</p>
<h2 id="options_2">Options</h2>
<h3 id="chunking-option_2"><code>chunking</code> option</h3>
<div class="alert alert-block alert-default">

<h4 class="alert-heading">Amazon S3 Specific Note:</h4>

<p>The default chunk size for Fine Uploader S3 is 5 MiB. If your file is smaller than that size, the upload will be non-chunked.</p>

</div>

<table class="table table-striped table-bordered reference-table">
    <thead>
    <tr>

        <td><p>Option Name</p></td>

        <td><p>Type</p></td>

        <td><p>Default</p></td>

        <td><p>Description</p></td>

    </tr>
    </thead>

    <tbody>

    <tr>

        <td><p>enabled</p></td>

        <td><p><code>Boolean</code></p></td>

        <td><p><code>false</code></p></td>

        <td><p>Enable or disable splitting the file separate parts. Each part is sent in a separate request.</p></td>

    </tr>

    <tr>

        <td><p>partSize</p></td>

        <td><p><code>Number</code></p></td>

        <td><p><code>2000000</code></p></td>

        <td><p>THe maximum size of each part, in bytes.</p></td>

    </tr>

    </tbody>
</table>

<h3 id="chunkingparamnames-option_1"><code>chunking.paramNames</code> option</h3>
<div class="alert alert-block alert-default">

<h4 class="alert-heading">Amazon S3 Specific Note:</h4>

<p>These options do not apply to the S3 uploader</p>

</div>

<table class="table table-striped table-bordered reference-table">
    <thead>
    <tr>

        <td><p>Option Name</p></td>

        <td><p>Type</p></td>

        <td><p>Default</p></td>

        <td><p>Description</p></td>

    </tr>
    </thead>

    <tbody>

    <tr>

        <td><p>chunkSize</p></td>

        <td><p><code>String</code></p></td>

        <td><p><code>'qqchunksize'</code></p></td>

        <td><p>Name of the parameter passed with a chunked request that specifies the size in bytes of the associated chunk.</p></td>

    </tr>

    <tr>

        <td><p>partByteOffset</p></td>

        <td><p><code>String</code></p></td>

        <td><p><code>'qqpartbyteoffset'</code></p></td>

        <td><p>Name of the parameter passed with a chunked request that specifies the starting byte of the associated chunk.</p></td>

    </tr>

    <tr>

        <td><p>partIndex</p></td>

        <td><p><code>String</code></p></td>

        <td><p><code>'qqpartindex'</code></p></td>

        <td><p>Name of the parameter passed with a chunked request that specifies the index of the associated partition.</p></td>

    </tr>

    <tr>

        <td><p>totalParts</p></td>

        <td><p><code>String</code></p></td>

        <td><p><code>'qqtotalparts'</code></p></td>

        <td><p>Name of the parameter passed with a chunked request that specifies the total number of chunks associated with the <code>File</code> or <code>Blob</code>.</p></td>

    </tr>

    </tbody>
</table>

<h2 id="events_1">Events</h2>
<table class="table table-striped table-bordered reference-table">
    <thead>
    <tr>

        <td><p>Event</p></td>

        <td><p>Parameters</p></td>

        <td><p>Description</p></td>

    </tr>
    </thead>

    <tbody>

    <tr>

        <td><p>uploadChunk</p></td>

        <td><p><code>Integer</code> id, <code>String</code> name, <code>Object</code> chunkData</p></td>

        <td><p>Called just before a chunk request is sent.</p></td>

    </tr>

    </tbody>
</table>

<h3 id="the-chunkdata-object">The chunkData Object</h3>
<p>The <code>chunkData</code> object, which is passed into the &#8216;uploadChunk&#8217; event handler, has 4 properties:</p>
<ul>
<li><code>partIndex</code> - the 0-based index of the associated partition.</li>
<li><code>startByte</code> - the byte offset of the current chunk.</li>
<li><code>endByte</code> - the last byte of the current chunk.</li>
<li><code>totalParts</code> - the total number of partitions associated with the <code>File</code> or <code>Blob</code>.</li>
</ul>
<p><a href="http://blog.fineuploader.com/2012/12/28/file-chunkingpartitioning-is-now-available-in-3-2/">For more information, see the associated blog post</a></p>


                
                </div>

            
            </div>
            <hr>
            <footer>
    <p>Powered by <a href="http://www.widen.com/">Widen Enterprises, Inc.</a>. &copy; 2013</p>
</footer>

        </div> <!-- /container -->
        

        
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        
        
            <!--
            <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
            -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        

        
            
            
            <script>
                
                var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
                (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
                    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
                    s.parentNode.insertBefore(g,s)}(document,'script'));
                
            </script>
            

            
            <script type="text/javascript">
                var clicky_site_ids = clicky_site_ids || [];
                clicky_site_ids.push(100643192);
                (function() {
                    var s = document.createElement('script');
                    s.type = 'text/javascript';
                    s.async = true;
                    s.src = '//static.getclicky.com/js';
                    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
                })();
            </script>
            <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100643192ns.gif" /></p></noscript>
            
        

        
        
        


    </body>
</html>